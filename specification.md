# Техническое задание

## Функционал

* При открытии страница находится в неактивном состоянии.
* Загрузка и успешная инициализация карты (карта реализуется сторонней библиотекой Leaflet) переводит страницу в активное состояние. В активном состоянии страница позволяет вносить изменения в форму и отправлять её на сервер. После загрузки данных с сервера можно просматривать похожие объявления на карте, фильтровать их и уточнять подробную информацию о них, показывая для каждого из объявлений карточку.

### Заполнение информации

* Заполнение всей информации производится на одной странице без промежуточных переходов.
* После заполнения всех данных, при нажатии на кнопку «Опубликовать», все данные из формы, включая изображения, с помощью AJAX-запроса отправляются на сервер методом POST.
* Страница реагирует на неправильно введённые значения в форму. С неправильно заполненными данными отправки не происходит, проблемные поля подсвечиваются.
* При успешной отправке формы или её очистке страница, не перезагружаясь, переходит в "сброшенное" состояние.
* Если отправка данных прошла успешно, показывается соответствующее сообщение. Сообщение должно исчезать по нажатию на клавишу Esc и по клику на произвольную область экрана.
* Если при отправке данных произошла ошибка запроса, показывается соответствующее сообщение, вся введённая пользователем информация сохраняется.

### Выбор адреса на карте

* Адрес изменяется перемещением специальной метки по карте. Содержимое поля адреса должно всегда соответствовать координатам метки.

### Сравнение с похожими объявлениями

* Полный список похожих объявлений загружается после перехода страницы в активное состояние.
* Если при загрузке данных с сервера произошла ошибка запроса, нужно показать соответствующее сообщение. Дизайн блока с сообщением нужно придумать самостоятельно.
* Каждое из объявлений показывается на карте в виде метки.
* При нажатии на метку похожего объявления, показывается балун (предоставляется API карт) с подробной информацией об объявлении — "карточка". Разметка карточки должна создаваться на основе шаблонного элемента. Если данных для заполнения не хватает, соответствующий блок в карточке скрывается.При отсутствии полей не должно возникать ошибок.
* Объекты, расположенные неподалёку, можно фильтровать. Фильтрация производится при изменении значений соответствующих полей формы.
* Как до изменения фильтров, так и при изменении фильтра, на карте должны показываться все подходящие варианты, но не более 10 меток.
* Форма, с помощью которой производится фильтрация похожих объявлений на момент открытия страницы заблокирована и становится доступной только после окончания загрузки всех похожих объявлений, которые в свою очередь начинают загружаться только после загрузки и успешной инициализации карты.
* Отрисовка соответствующих выбранным фильтрам меток должна происходить не чаще, чем раз в полсекунды (устранение дребезга).

### Дополнительный функционал

* В форме подачи объявления показывается превью аватарки пользователя и фотографии помещения при изменении значений соответствующих полей.
